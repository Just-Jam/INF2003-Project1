<!-- templates/products/product_detail.html -->
{% extends 'base.html' %}

{% block title %}{{ product.name }} - E-Shop{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-5">
    <div class="card shadow-sm">
      <img
        src="{{ product.image_url|default:'/static/img/placeholder.png' }}"
        class="card-img-top"
        alt="{{ product.name }}"
      >
    </div>
  </div>

  <div class="col-md-7">
    <h2>{{ product.name }}</h2>
    <p class="text-muted">Category: {{ product.category.name }}</p>
    <h4 class="text-primary mb-3">${{ product.price }}</h4>

    <p>{{ product.description }}</p>

    <p class="{% if product.stock > 0 %}text-success{% else %}text-danger{% endif %}">
      {% if product.stock > 0 %}
        In stock: {{ product.stock }}
      {% else %}
        Out of stock
      {% endif %}
    </p>

    <form class="row g-2 align-items-center" method="post" action="{% url 'add_to_cart' product.id %}">
    <!--<form class="row g-2 align-items-center" method="post" action="#">-->
      {% csrf_token %}
      <div class="col-auto">
        <label for="quantity" class="form-label mb-0">Quantity</label>
      </div>
      <div class="col-auto">
        <input
          type="number"
          name="quantity"
          id="quantity"
          class="form-control"
          min="1"
          value="1"
        >
      </div>
      <div class="col-auto">
        <button type="submit" class="btn btn-primary">
          Add to Cart
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
